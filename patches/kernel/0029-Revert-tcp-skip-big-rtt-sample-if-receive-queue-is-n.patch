From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Fabian=20Gr=C3=BCnbichler?= <f.gruenbichler@proxmox.com>
Date: Fri, 19 Dec 2025 08:46:26 +0100
Subject: [PATCH] Revert "tcp: skip big rtt sample if receive queue is not
 empty"

This reverts commit a00f135cd986f7d23f59723f4f9d531f38867d9d.
---
 net/ipv4/tcp_input.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/net/ipv4/tcp_input.c b/net/ipv4/tcp_input.c
index a5200bd0ea2292d04b661216a3b939e70f9fdbba..e2895a9e621d55db10b5685972f6c8eacdb7aee9 100644
--- a/net/ipv4/tcp_input.c
+++ b/net/ipv4/tcp_input.c
@@ -682,9 +682,6 @@ static void tcp_rcv_rtt_update(struct tcp_sock *tp, u32 sample, int win_dep)
 		 */
 		if (win_dep)
 			return;
-		/* Do not use this sample if receive queue is not empty. */
-		if (tp->rcv_nxt != tp->copied_seq)
-			return;
 		new_sample = old_sample - (old_sample >> 3) + sample;
 	}
 
